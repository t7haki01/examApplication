{% extends 'template.html.twig' %}

{% block css %}
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
{% endblock %}

{% block body %}
    <h1>Here comes exam main </h1>
    <div><a href="{{ path('student_main', {'studentId':studentId}) }}"><button>
                back menu
            </button></a></div>

    <P>Here could come some exams which is published</P>
{#for checking that does student already applied exam or not,#}
    {#push exam id from examResult entity filtered by student #}
    {% set checkArray = [] %}
    {% for checkData in result %}
    {% set checkArray = checkArray|merge([checkData.exam.id]) %}
    {% endfor %}
    <table>
    {% for exam in exams %}
        {% if exam.ispublished == true %}
            <tr><td><table class="table">
                        <tr>
                            <th colspan="2">{{ exam.examTitle }}</th>
                        </tr>
                        <tr>
                            <td>Created Date</td>
                            <td>{{ exam.date | date('d.m.Y') }}</td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                    {% if exam.id in checkArray %}
                                        You already applied
                                    {% else %}
                                        <a href="{{ path('exam_show', {'examId': exam.id, 'studentId':studentId}) }}">
                                            <button>Take Exam</button></a>
                                    {% endif %}
                            </td>
                        </tr>
                    </table></td></tr>
        {% endif %}
    {% endfor %}
    </table>
{% endblock %}